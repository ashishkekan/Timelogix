{% extends "navbar/base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>Profile</h2>
    <p>Welcome, {{ user.username }}!</p>

    <div class="row">
        <!-- Profile Picture and Info -->
        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-body text-center">
                    <h5>{{ user.first_name }} {{ user.last_name }}</h5>
                    <p class="text-muted">{{ user.email }}</p>
                    <a href="" class="btn btn-primary btn-sm">Change Profile Picture</a>
                </div>
            </div>
        </div>

        <!-- Personal Details and Actions -->
        <div class="col-md-8">
            <div class="card mb-4">
                <div class="card-body">
                    <h5>Personal Details</h5>
                    <form method="post" %}">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="first_name">First Name</label>
                            <input type="text" id="first_name" name="first_name" class="form-control" value="{{ user.first_name }}">
                        </div>
                        <div class="form-group">
                            <label for="last_name">Last Name</label>
                            <input type="text" id="last_name" name="last_name" class="form-control" value="{{ user.last_name }}">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" class="form-control" value="{{ user.email }}">
                        </div>
                        <button type="submit" class="btn btn-primary">Update Details</button>
                    </form>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-body">
                    <h5>Change Password</h5>
                    <form method="post" action="">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="old_password">Current Password</label>
                            <input type="password" id="old_password" name="old_password" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="new_password">New Password</label>
                            <input type="password" id="new_password" name="new_password" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="confirm_password">Confirm New Password</label>
                            <input type="password" id="confirm_password" name="confirm_password" class="form-control">
                        </div>
                        <button type="submit" class="btn btn-primary">Change Password</button>
                    </form>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-body">
                    <h5>Recent Activity</h5>
                    <ul class="list-group">
                        <!-- Loop through user's recent activities -->
                        {% for activity in recent_activities %}
                            <li class="list-group-item">{{ activity.description }} <span class="text-muted">on {{ activity.timestamp }}</span></li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
